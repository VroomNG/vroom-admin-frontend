<div class="header bg-gradient-danger pb-8 pt-5 pt-md-8">

</div>
<!-- Page content -->
<div class="container-fluid mt--7">
<!-- Table -->
<div class="row">
  <div class="col">
    <div class="card shadow">
      <div class="card-header border-0">
        <h3 class="mb-0 d-inline-block">Cash Settlement Details</h3>
        <span class="text-right p-2 ">
          <input type="search" class="form-control w-25 d-inline-block" [(ngModel)]="FilterName" placeholder="search" />
        </span>
        <span class="text-right p-2 expBtn">
        <span (click)="popupSettings()"> <i class="fas fa-cog set-cls"></i> </span> <button class="btn btn-primary" (click)="exportRiderReview()">Export</button> <button id="btnAdminPaid" [hidden]="true" class="btn btn-primary" (click)="paidAdmin()">Paid</button></span>
      </div>

      
      <div class="table-responsive" >
        <table class="table align-items-center table-flush">
          <thead class="thead-light">
            <tr>
              <!-- <th scope="col">Select</th> -->
              <th scope="col">Driver Name</th>
              <th scope="col">Driver Code</th>
              <th scope="col">Email</th>
              <th scope="col">Phone</th>
              <th scope="col"><span class="text-center d-block">Cash Settlement</span> <br> <span class="text-center d-block"> (&#x20A6;)</span> </th>
              <th scope="col">Last Settlement Date</th>
              <th scope="col">Next Settlement Date</th>
              <!-- <th scope="col" class="text-center">View Wallet<br>details History</th> -->
              <th scope="col" class="text-center">Details<br> History</th>
              <th scope="col" class="text-center">View<br>Transac<br>tion</th>
              <!-- <th scope="col" class="text-center">Add <br>Payment</th> -->
             </tr>
          </thead>
          <tbody>            
            <tr *ngFor = "let item of (pageOfItems  | search: FilterName)">
              <!-- <td><input type="checkbox" id="{{item.user_id}}" class="paidStatusUpdt" (change)="selectDriverPaid($event,item.user_id)"></td> -->
              <th scope="row">{{item.firstname | titlecase}} {{item.lastname | titlecase}}</th>
              <td>DRV00{{item.driver_id}}</td>
              <td>{{item.email}}</td>
              <td>{{item.phone_no}}</td>             
              <td [ngClass]="item.current_commission>thresholdAmt?'text-right redcolor':'text-right'">{{item.current_commission}}</td>
              <td>{{item.last_settlement_date}}</td>
              <td>{{item.next_settlement_date}}</td>
              <td class="text-center"><span (click)="viewCashSettHistory(item.id,item.current_commission)">
                <i class="fas fa-history his_icon" title="History"></i></span> 
               </td>
                <td class="text-center"> <a (click)="viewDriverPayments(item.id,item.current_commission)">
                  <i class="fas fa-clipboard-list" style="font-size: 28px;"></i></a></td>
              <!-- <td class="text-center"> <a  href="#settlements/driver-settlement/transaction-details-driver"><i class="fas fa-wallet" style="font-size: 28px;"></i></a></td> -->
              <!-- <td class="text-center"> <a (click)="viewDriverPayments(item.user_id,item.amount,item.firstname,item.lastname,1,0)"><i class="fas fa-clipboard-list" style="font-size: 28px;"></i></a></td> -->
            
              
              <!-- <td class="text-center">              
                  <div  class=" dropdown-menu-right dropdown-menu-arrow">
                    <a class="dropdown-item" href="#/payment/add-payment">Edit</a>                   
                  </div>               
              </td> -->
            </tr>
                  
          </tbody>
        </table>
      </div>
      <div class="card-footer py-4">
        <div class="card-footer pb-0 pt-3">         
          <jw-pagination [items]="driverList | search: FilterName" (changePage)="onChangePage($event)"></jw-pagination>
      </div>
      </div>
    </div>
  </div>
  <ng-template #content let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Transaction ID</h4>
      <button id="closeBtn" type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
      <!-- <button id="btnHideClose" [hidden]="true" ></button> -->
    </div>
    <div class="modal-body map-detail-pop-up">         
        <div class="form-group">            
          <div class="input-group">              
            <input type="text" id="txtTransactionID" class="form-control" (keyup)="clearError()"
              placeholder="Transaction ID" />    
             
            
          </div>
          <div *ngIf="errorMessage != ''" class="divclass">
            <div class="help-block">
              <div class="invalid-feedback">{{errorMessage}}</div>
            </div>
          </div>
          <div class="input-group-append" style="float: right;">
            <span class="text-right p-2">
              <button id="btnTrans" class="btn btn-primary" (click)="saveTransaction()">Save</button></span>
          </div>
        </div>         
    </div>
  
  </ng-template>
  <button id="btnModelPopup" [hidden]="true" class="btn btn-lg btn-outline-primary" (click)="open(content)"> modal</button>
</div>

</div>
<ng-template #contentEdit let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Settings</h4>
    <button id="closeBtnSett" type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
    <!-- <button id="btnHideClose" [hidden]="true" ></button> -->
  </div>
  <div class="modal-body map-detail-pop-up">         
      <div class="form-group">      
        <label class="form-control-label" for="input-password">Commission Threshold</label>           
        <div class="input-group">    
               
          <input type="text" id="txtThresholdAmount" class="form-control" (keyup)="clearError()"
            placeholder="Threshold Amount" value="{{settlementList.threshold_amount}}" />    
                     
        </div>
        <div *ngIf="errorMessage != ''" class="divclass">
          <div class="help-block">
            <div class="invalid-feedback">{{errorMessage}}</div>
          </div>
        </div>
        <label class="form-control-label" for="input-password">Maximum Days</label>  
        <div class="input-group">  
                   
          <select id="selmaxdays" class="form-control" 
          [(ngModel)]="settlementList.max_days">
          <option selected disabled value="">Select a Days</option>
          <option *ngFor="let level of settingdays" value="{{level.value}}" >
            {{level.value}}
          </option>
        </select>

          <!-- <input type="text" id="txtmaxdays" class="form-control" (keyup)="clearError()"
            placeholder="Maximum Days" value="{{settlementList.max_days}}"/>     -->
                     
        </div>
        <div class="input-group-append" style="float: right;">
          <span class="text-right p-2">
            <button id="btnSetting_{{settlementList.id}}" class="btn btn-primary" (click)="saveSettings($event)">Save</button></span>
        </div>
      </div>         
  </div>

</ng-template>
<button id="btnModelPopupSettings" [hidden]="true" class="btn btn-lg btn-outline-primary" (click)="openSettings(contentEdit)"> modal</button>


  