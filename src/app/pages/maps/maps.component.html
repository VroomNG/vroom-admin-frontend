<div class="header bg-gradient-danger py-5">
  <div class="container-fluid">
    <div class="header-body" [hidden]="true">
      <!-- Card stats -->
      <div class="row">
        <div class="col-xl-3 col-lg-6">
          <div class="card card-stats mb-4 mb-xl-0">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <h5 class="card-title text-uppercase text-muted mb-0">Traffic</h5>
                  <span class="h2 font-weight-bold mb-0">350,897</span>
                </div>
                <div class="col-auto">
                  <div class="icon icon-shape bg-danger text-white rounded-circle shadow">
                    <i class="fas fa-chart-bar"></i>
                  </div>
                </div>
              </div>
              <p class="mt-3 mb-0 text-muted text-sm">
                <span class="text-success mr-2"><i class="fa fa-arrow-up"></i> 3.48%</span>
                <span class="text-nowrap">Since last month</span>
              </p>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-lg-6">
          <div class="card card-stats mb-4 mb-xl-0">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <h5 class="card-title text-uppercase text-muted mb-0">New users</h5>
                  <span class="h2 font-weight-bold mb-0">2,356</span>
                </div>
                <div class="col-auto">
                  <div class="icon icon-shape bg-warning text-white rounded-circle shadow">
                    <i class="fas fa-chart-pie"></i>
                  </div>
                </div>
              </div>
              <p class="mt-3 mb-0 text-muted text-sm">
                <span class="text-danger mr-2"><i class="fas fa-arrow-down"></i> 3.48%</span>
                <span class="text-nowrap">Since last week</span>
              </p>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-lg-6">
          <div class="card card-stats mb-4 mb-xl-0">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <h5 class="card-title text-uppercase text-muted mb-0">Sales</h5>
                  <span class="h2 font-weight-bold mb-0">924</span>
                </div>
                <div class="col-auto">
                  <div class="icon icon-shape bg-yellow text-white rounded-circle shadow">
                    <i class="fas fa-users"></i>
                  </div>
                </div>
              </div>
              <p class="mt-3 mb-0 text-muted text-sm">
                <span class="text-warning mr-2"><i class="fas fa-arrow-down"></i> 1.10%</span>
                <span class="text-nowrap">Since yesterday</span>
              </p>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-lg-6">
          <div class="card card-stats mb-4 mb-xl-0">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <h5 class="card-title text-uppercase text-muted mb-0">Performance</h5>
                  <span class="h2 font-weight-bold mb-0">49,65%</span>
                </div>
                <div class="col-auto">
                  <div class="icon icon-shape bg-info text-white rounded-circle shadow">
                    <i class="fas fa-percent"></i>
                  </div>
                </div>
              </div>
              <p class="mt-3 mb-0 text-muted text-sm">
                <span class="text-success mr-2"><i class="fas fa-arrow-up"></i> 12%</span>
                <span class="text-nowrap">Since last month</span>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- Page content -->
<div class="container-fluid">



  <div class="row">
    <div class="col">
      <div class="card shadow border-0">
        <!-- <div class="col text-right my-4 position-relative refresh_btn"> -->
        <!-- <button class="btn btn-white font-weight-bold" (click)="Maprefresh()">Refresh</button> -->
        <!-- </div> -->
        <div class="rounded" id="map" style="width: 100%; height: 600px;"></div>
      </div>
    </div>
  </div>

  <!-- map data -->
  <div>
    <ul class="map-status" *ngIf="isFormReady">
      <li class="active-status green">
      <!-- (click)="onlineDrivers(event, 1, '1', 'driver')" -->
      
        <a class="btn">
          <!-- <div><img src="/dist/assets/img/online.png" style="width:45px;" /></div> -->
          <div><img src="/dist/assets/img/online.png" style="width:45px;" /></div>
          <p><strong>Online Drivers</strong></p>
          <span>{{driverData[0].online_drivers}}</span>
        </a>
      </li>
      <li class="active-status red" >
      <!-- (click)="onlineDrivers(event, 2, '0', 'driver')"> -->
        <a class="btn">
          <!-- <div> <img src="/dist/assets/img/offline.png" /></div> -->
          <div> <img src="/dist/assets/img/offline.png" /></div>
          <p> <strong>Offline Drivers</strong></p>
          <span>{{driverData[0].InTrip}}</span>
        </a>
      </li>
      <li class="active-status yellow">
       <!-- (click)="onlineDrivers(event, 3, '1', 'trip')"> -->
        <a class="btn">

          <!-- <div><img src="/dist/assets/img/Accepted.png" style="width:45px;" /></div> -->
          <div><img src="/dist/assets/img/Accepted.png" style="width:45px;" /></div>
          <p> <strong>Accepted Drivers</strong></p>
          <span>{{driverData[0].Accepted}}</span>
        </a>
      </li>
      <!-- <li class="active-status yellow-orange">
        <a class="btn" (click)="onlineDrivers($event, 4, '0', 'trip')">
          
          <div> <img src="/dist/assets/img/Active-car.png" style="width: 96px;padding: 8px;" /></div>
          <p> <strong>OnPickup Drivers</strong></p>
          <span>{{driverData[0].OnPickUp}}</span>
        </a>
      </li>
      <li class="active-status orange" (click)="onlineDrivers($event, 5, '3', 'trip')">
        <a class="btn">

          <div><img src="/dist/assets/img/arrived.png" style="width:45px;" /></div>
          <p> <strong>Arrived Drivers</strong></p>
          <span>{{driverData[0].Arrived}}</span>
        </a>
      </li> -->
      <li i class="active-status blue">
       <!-- (click)="onlineDrivers(event, 6, '4', 'trip')"> -->
        <a class="btn">

          <!-- <div><img src="/dist/assets/img/inactive.svg" style="width:45px;" /></div> -->
          <div><img src="/dist/assets/img/inactive.svg" style="width:45px;" /></div>
          <p> <strong>On Trip Drivers</strong></p>
          <span>{{driverData[0].InTrips}}</span>
        </a>
      </li>
    </ul>
  </div>
 

</div>




<ng-template #content let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Driver Details</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body map-detail-pop-up">
    <form *ngIf="isFormReadyPop">
      <span *ngFor="let item of tripsList">
        <div class="row">

          <div class="col-lg-12">

            <div class="card bg-secondary shadow">
              <div class="card-header bg-white border-0" style="padding-bottom:0;">
                <!-- <h5>Your Trip : On {{item.trip_date | date: 'MM/dd/yyyy HH:mm'}}</h5> -->
              </div>
              <div class="card-body" style="padding-top:0;">
                <!-- <iframe
                  src="https://www.google.com/maps/embed?pb=!1m28!1m12!1m3!1d3654.505988005265!2d-70.39553278601626!3d-23.657856600000002!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m13!3e0!4m5!1s0x96afd50547a3a303%3A0xfdcceceade532db3!2sTeniente%20Manuel%20Orella%201367%2C%20Antofagasta%2C%20Chile!3m2!1d-23.657775599999997!2d-70.3938623!4m5!1s0x96afd50547a3a303%3A0xd9bc46267ac20de9!2sTeniente%20Manuel%20Orella%201366%2C%20Antofagasta%2C%20Chile!3m2!1d-23.6579089!2d-70.3940946!5e0!3m2!1sen!2sin!4v1600420553056!5m2!1sen!2sin"
                  width="100%" height="300" frameborder="0" style="border:0;" allowfullscreen="" aria-hidden="false"
                  tabindex="0"></iframe> -->
                  <!-- https://www.google.com/maps/embed/v1/place?q=11.9313835,79.8338761&amp;key=AIzaSyA6fB_gO8xzMxAJZzegpNzvlCyG6mlbz-A -->
                  <!-- https://www.google.com/maps?q={{item.to_lat}},{{item.to_long}}&z=15&output=embed
                  <iframe
                  src="{{maproute}}"
                  width="100%" height="300" frameborder="0" style="border:0;" allowfullscreen="" aria-hidden="false"
                  tabindex="0"></iframe> -->
                 
                  <div [innerHtml]="data"></div>
                 
              </div>
            </div>
            <div class="card bg-secondary shadow">

              <div class="card-body" style="display: none;">
                <table class="table trip-loc table-borderless ">
                  <thead>
                    <tr>
                      <th colspan="2" scope="col" style="border-bottom: 1px solid transparent;">
                        <h5>Trip Location</h5>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <th scope="row" width="7%">Pickup:</th>
                      <td width="93%"><b>Teniente Manuel Orella 1365, Antofagasta, Chile</b></td>
                    </tr>
                    <tr>
                      <th scope="row" width="7%">Drop:</th>
                      <td width="93%"><b>Teniente Manuel Orella 1365, Antofagasta, Chile</b></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <hr>
            <div class="card bg-secondary shadow">
              <div class="card-header bg-white border-0">

              </div>
              <div class="card-body">

                <div class="form-group">
                  <div class="row show-grid">
                    <div class="col-4 col-md-4">
                      <p style="margin-bottom: 0;text-align: center;">Vehicle Type</p>
                      <p style="margin-bottom: 0;text-align: center;"> <b>{{item.vehicle_type}}</b></p>
                    </div>
                    <div class="col-4 col-md-4 ng-star-inserted">
                      <p style="margin-bottom: 0;text-align: center;">Distance</p>
                      <p style="margin-bottom: 0;text-align: center;"><b>({{item.distance}} KM)</b></p>
                    </div>
                    <div class="col-4 col-md-4">
                      <p style="margin-bottom: 0;text-align: center;">Trip time (Min)</p>
                      <p style="margin-bottom: 0;text-align: center;">
                        <b>{{item.trip_time}}</b>
                      </p>
                    </div>
                    <div class="col-4 col-md-4">
                      <p style="margin-bottom: 0;text-align: center;padding-top: 10px;">OTP</p>
                      <p style="margin-bottom: 0;text-align: center;"><b>{{item.security_code}}</b></p>

                    </div>
                    <div class="col-4 col-md-4">
                      <p style="margin-bottom: 0;text-align: center; padding-top:10px;">Request From</p>
                      <p style="margin-bottom: 0;text-align: center;">
                        <b>Request From Mobile</b>
                      </p>
                    </div>
                  </div>
                </div>
                <hr>

                <div class="form-group">
                  <table class="table trip-loc">
                    <tbody>
                      <tr>
                        <td width="10%" style="border-top: transparent;">
                          <img alt="img" class="user-picture image" height="42" src="assets/img/driver.png"
                            style="margin-top: 10px;" width="42">
                        </td>
                        <td style="border-right: 1px solid #dee2e6 !important;border-top: transparent;" width="40%">
                          <div style="text-align: left;">Driver</div>
                          <div>
                            <p style="text-align: left;"><b>{{item.driverName}}</b></p>
                            <span>{{item.driverPhone_no}}</span>
                          </div>
                        </td>
                        <td width="10%" style="border-top: transparent;"><img _ngcontent-c3="" alt="img"
                            class="user-picture image" height="42" src="assets/img/rider.png" style="margin-top: 10px;"
                            width="42"></td>
                        <td width="40%" style="border-top: transparent;">
                          <div style="text-align: left;">Rider</div>
                          <div>
                            <p style="text-align: left;"><b>{{item.riderName}}</b></p>
                            <span>{{item.riderPhone_no}}</span>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-12">
            <div class="card bg-secondary shadow">
              <div class="card-header bg-white border-0" style="padding-bottom: 0;">
                <h4> Fare Breakdown For Ride No : {{item.id}}</h4>
              </div>
              <div class="card-body" style="padding-top: 0;">
                <table class="table table-bordered fare-det trip-locpick " style="text-align: left">
                  <tbody>
                    <tr>
                      <td>Actual Cost</td>
                      <td>{{item.trip_amount}}</td>
                    </tr>
                    <tr>
                      <th class="totalFare" scope="row">Total Fare (Payment Mode: cash)</th>
                      <th class="totalFare" scope="row">{{item.trip_amount}}</th>
                    </tr>
                  </tbody>
                </table>
                <div class="row" style="padding-top: 25px;">
                  <div class="col-lg-12" style="text-align: right;" style="display: none;">
                    <a href="#/trips/end-trip" class="btn btn-danger">END TRIP</a>
                    <a href="#!" class="btn btn-danger">DELETE</a>
                  </div>
                </div>
              </div>
            </div>
            <hr>
            <div class="card bg-secondary shadow">

              <div class="card-body">
                <div class="form-group">
                  <table class="table trip-loc">
                    <thead>
                      <tr>
                        <th colspan="2" scope="col">
                          <h5>Estimated Location</h5>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <th scope="row" width="7%">Pickup:</th>
                        <td width="93%" style="white-space: normal;"><b>{{item.from_address}}</b></td>
                      </tr>
                      <tr>
                        <th scope="row" width="7%">Drop:</th>
                        <td width="93%" style="white-space: normal;"><b>{{item.to_address}}</b></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>

        <hr>

        <div class="card bg-secondary shadow">
          <div class="card-header bg-white border-0">
            <h3>Request Drivers List</h3>
          </div>
          <div class="card-body" style="padding-top: 0;">
            <table class="table table-bordered table-responsive-md" style="text-align: center">
              <thead>
                <tr>
                  <th>Driver Code</th>
                  <th>Driver name</th>
                  <th>Phone No.</th>
                  <th>Current Service</th>
                  <th>Current Status</th>
                  <!-- <th>Status</th> -->
                  <th>Distance *(KM)</th>
                </tr>
              </thead>
              <tbody>
                <!--bindings={
                      "ng-reflect-ng-for-of": "[object Object]"
                      }-->
                <tr border="1" class="ng-star-inserted">
                  <td>DRV496</td>
                  <td>{{item.driverName}}</td>
                  <td>{{item.riderPhone_no}}</td>
                  <td>{{item.trip_type == '1' ? 'Individual':item.trip_type == '2'?'Share':item.trip_type
                    =='3'?'Split-Fare':''}}</td>
                  <td>{{tripStatus(item.trip_status)}}</td>
                  <!-- <td>Accepted</td> -->
                  <td>{{item.distance}}</td>
                </tr>
                <!--bindings={
                      "ng-reflect-ng-if": "false"
                      }-->
              </tbody>
            </table>

          </div>
        </div>

      </span>
    </form>
  </div>
  <!-- <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Save</button>
  </div> -->
</ng-template>

<button id="btnModelPopup" [hidden]="true" class="btn btn-lg btn-outline-primary" (click)="open(content)">Launch demo modal</button>

